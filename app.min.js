let list=[],listAux=[],offset=0,limit=23,page=1,pageOf=1;const cardsTemplate=document.querySelector("#cardsTemplate").content,cards=document.querySelector("#cards"),input=document.querySelector("#search"),modalBodyTemplate=document.querySelector("#modalBodyTemplate").content,modalBody=document.querySelector("#modalBody"),evolutionChainTemplate=document.querySelector("#evolutionChainTemplate").content,chainContainer=document.querySelector("#chainContainer"),btnUp=document.getElementById("btnUp");function charge(){loading.classList.remove("d-none"),setTimeout(function(){loading.classList.add("d-none")},"3500")}async function loadFetchData(){const t=[];for(let e=1;e<=898;e++){var n="https://pokeapi.co/api/v2/pokemon/"+e;t.push(fetch(n).then(e=>e.json()))}Promise.all(t).then(e=>{e=e.map(e=>({name:e.name,id:e.id,img:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${e.id}.png`,type:e.types.map(e=>e.type.name)}));list=e,listAux=e,document.querySelector("#pageOf").textContent=Math.ceil(listAux.length/24),renderPokemons(listAux,offset,limit)})}function renderCategories(e){e.forEach(e=>{if("unknown"!==e.name&&"shadow"!==e.name){const t=document.createElement("option");t.classList.add("text-capitalize"),t.textContent=e.name,document.querySelector("#select").appendChild(t)}})}window.addEventListener("DOMContentLoaded",async()=>{charge(),loadFetchData();const e=await fetch("https://pokeapi.co/api/v2/type");renderCategories((await e.json()).results)});const renderPokemons=(t,n,r)=>{n+24>=listAux.length?document.querySelector("#next").disabled=!0:document.querySelector("#next").disabled=!1,document.querySelector("#prev").disabled=n<=1;const o=document.createDocumentFragment();for(let e=n;e<=n+r;e++)if(void 0!==t[e]){const a=cardsTemplate.cloneNode(!0);a.querySelector("#card").classList.add(""+t[e].type[0]),a.querySelector("#cardPadre").setAttribute("onclick",`loadPokemonData(${t[e].id})`),a.querySelector("#cardPadre").setAttribute("data-bs-toggle","modal"),a.querySelector("#cardPadre").setAttribute("data-bs-target","#exampleModal"),a.querySelector("#pokeImg").setAttribute("src",t[e].img),a.querySelector("#pokeId").textContent="No."+t[e]?.id.toString().padStart(3,0),a.querySelector("#pokeName").textContent=t[e].name,a.querySelector("#pokeType1").classList.add(t[e].type[0]),a.querySelector("#pokeType1Img").setAttribute("src",`src/${t[e].type[0]}.svg`),void 0!==t[e]?.type[1]?(a.querySelector("#pokeType2").classList.add(t[e].type[1]),a.querySelector("#pokeType2Img").setAttribute("src",`src/${t[e].type[1]}.svg`)):a.querySelector("#pokeType2").classList.add("d-none"),o.appendChild(a)}cards.appendChild(o)};async function loadPokemonData(t){modalBody.innerHTML="";const e=await await fetch("https://pokeapi.co/api/v2/pokemon/"+t).then(e=>e.json()),n={name:e.name,types:e.types.map(e=>e.type.name),abilities:e.abilities.map(e=>({ability:e.ability.name,hidden:e.is_hidden})),base_experience:e.base_experience,height:e.height/10+" m",weight:e.weight/10+" kg",stats:e.stats.map(e=>({name:e.stat.name,effort:e.effort,base:e.base_stat})),held_items:e.held_items.map(e=>e.item.name),sprites:[e.sprites].map(e=>({img:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${t}.png`,back_default:e.back_default,front_default:e.front_default,back_shiny:e.back_shiny,front_shiny:e.front_shiny}))[0]};var r=await fetch("https://pokeapi.co/api/v2/pokemon-species/"+t).then(e=>e.json());const o=await r,a={base_happiness:o?.base_happiness,capture_rate:o?.capture_rate,color:o?.color?.name,egg_groups:o?.egg_groups.map(e=>e.name),gender_rate:o?.gender_rate,growth_rate:o?.growth_rate?.name,habitat:o?.habitat?.name,shape:o?.shape?.name,category:o?.genera.filter(e=>"en"===e.language.name)[0].genus,flavor_text_entries:o?.flavor_text_entries.filter(e=>"en"===e.language.name)[0].flavor_text.replace(/(\n'')/gm,"")},s=modalBodyTemplate.cloneNode(!0),i=document.createDocumentFragment();switch(t<=649?s.querySelector("#pokemonImg").setAttribute("src",`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/versions/generation-v/black-white/animated/${t}.gif`):s.querySelector("#pokemonImg").setAttribute("src",n.sprites.front_default),n.types.forEach(e=>{const t=document.createElement("div"),n=(t.classList+=e+" borde text-white fw-semibold px-3 py-2 rounded-5 d-flex justify-content-center align-items-center gap-1",document.createElement("img")),r=(n.src=`src/${e}.svg`,n.height=20,document.createElement("span"));r.classList+="text-capitalize",r.textContent=e,t.appendChild(r),t.appendChild(n),s.querySelector("#typesContainer").appendChild(t)}),s.querySelector("#pokemonName").textContent=n.name,s.querySelector("#pokemonDetailsText").textContent=a.flavor_text_entries,s.querySelector("#pokemonId").textContent="#"+t.toString().padStart(3,0),s.querySelector("#category").textContent=a.category,s.querySelector("#weight").textContent=n.weight,s.querySelector("#height").textContent=n.height,n.abilities.forEach(e=>{const t=document.createElement("p");!0!==e.hidden?(t.textContent=e.ability,t.classList="text-capitalize fw-semibold mb-0"):(t.textContent=e.ability+" (Hidden ability)",t.classList="text-capitalize muted mb-0"),s.querySelector("#abilitiesContainer").appendChild(t)}),s.querySelector("#shape").textContent=a.shape,s.querySelector("#color").textContent=a.color,a.gender_rate){case-1:s.querySelector("#genderDistribution").textContent="Genderless";break;case 0:s.querySelector("#genderDistribution").textContent="0.0% female to 100.0% male";break;case 1:s.querySelector("#genderDistribution").textContent="12.5% female to 87.5% male";break;case 2:s.querySelector("#genderDistribution").textContent="25.0% female to 75.0% male";break;case 4:s.querySelector("#genderDistribution").textContent="50.0% female to 50.0% male";break;case 6:s.querySelector("#genderDistribution").textContent="75.0% female to 25.0% male";break;case 7:s.querySelector("#genderDistribution").textContent="87.5% female to 12.5% male";break;case 8:s.querySelector("#genderDistribution").textContent="100.0% female to 0.0% male"}a.egg_groups.forEach(e=>{const t=document.createElement("p");t.textContent=e,t.classList="text-capitalize fw-semibold mb-0",s.querySelector("#eggGroupsContainer").appendChild(t)}),s.querySelector("#habitat").textContent=a.habitat,n.stats.forEach(e=>{if(1<=e.effort){const t=document.createElement("p");t.textContent=e.name,t.classList="text-capitalize fw-semibold mb-0",s.querySelector("#evYieldContainer").appendChild(t)}}),s.querySelector("#catchRate").textContent=a.capture_rate,s.querySelector("#baseHappiness").textContent=a.base_happiness,s.querySelector("#baseExp").textContent=n.base_experience,s.querySelector("#growthRate").textContent=a.growth_rate,n.held_items.forEach(e=>{const t=document.createElement("p");t.textContent=e,t.classList="text-capitalize fw-semibold mb-0",s.querySelector("#heldItemsContainer").appendChild(t)}),s.querySelector("#hp").textContent=n.stats[0].base,s.querySelector("#attack").textContent=n.stats[1].base,s.querySelector("#defense").textContent=n.stats[2].base,s.querySelector("#specialAttack").textContent=n.stats[3].base,s.querySelector("#specialDefense").textContent=n.stats[4].base,s.querySelector("#speed").textContent=n.stats[5].base;const c=await fetch(r.evolution_chain?.url);r=await c.json();const l=Object.values(r),u=[];1<l[1].evolves_to.length?l[1].evolves_to.forEach(e=>{u.push(e)}):(function e(t){0<t[0].evolves_to.length&&e(t[0].evolves_to),u.push(t[0])}([l[1]]),u.pop(),u.reverse()),[l].forEach(e=>{u.unshift(e[1])}),u.forEach(e=>{s.querySelector("#chainContainer").appendChild(setupChainImages(e))}),s.querySelector("#frontDefault").setAttribute("src",n.sprites.front_default),s.querySelector("#frontShiny").setAttribute("src",n.sprites.front_shiny),s.querySelector("#backDefault").setAttribute("src",n.sprites.back_default),s.querySelector("#backShiny").setAttribute("src",n.sprites.back_shiny),i.appendChild(s),modalBody.appendChild(i)}document.querySelector("#next").addEventListener("click",()=>{cards.innerHTML="",document.querySelector("#page").textContent=++page,renderPokemons(listAux,offset+=24,limit)}),document.querySelector("#prev").addEventListener("click",()=>{cards.innerHTML="",document.querySelector("#page").textContent=--page,renderPokemons(listAux,offset-=24,limit)}),document.querySelector("#select").addEventListener("change",()=>{input.value="",offset=0,page=1,cards.innerHTML="";const t=document.querySelector("#select").value;listAux="all"!==t?(listAux.sort(function(e,t){return e.id-t.id}),list.filter(e=>e.type[0]===t||e.type[1]===t)):list.sort(function(e,t){return e.id-t.id}),document.querySelector("#pageOf").textContent=Math.ceil(listAux.length/24),renderPokemons(listAux,offset,limit),document.querySelector("#page").textContent=page}),input.addEventListener("input",()=>{document.querySelector("#select").value="all",offset=0,limit=23,page=1,pageOf=1,document.querySelector("#page").textContent=page,cards.innerHTML="",listAux.sort(function(e,t){return e.id-t.id}),listAux=list.filter(e=>e.name.includes(input.value.toLowerCase())||e.id.toString().includes(input.value.toString())),document.querySelector("#pageOf").textContent=Math.ceil(listAux.length/24),renderPokemons(listAux,offset,limit)});const setupChainImages=e=>{const t=document.createDocumentFragment(),n=evolutionChainTemplate.cloneNode(!0);let r=Object.values(e.evolution_details);return 0<r.length&&(null!==r[0].trigger.name&&(n.querySelector("#requires").textContent+=" "+r[0].trigger.name.replace("-"," "),n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].item?.name&&void 0!==r[0].item?.name&&(n.querySelector("#requires").textContent+=" "+r[0].item.name.replace("-"," "),n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].location?.name&&void 0!==r[0].location?.name&&(n.querySelector("#requires").textContent+=" at "+r[0].location.name.replace("-"," "),n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].min_level&&void 0!==r[0].min_level&&(n.querySelector("#requires").textContent+=" "+r[0].min_level,n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].min_happiness&&void 0!==r[0].min_happiness&&(n.querySelector("#requires").textContent+=" with happiness "+r[0].min_happiness+"+",n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].min_affection&&void 0!==r[0].min_affection&&(n.querySelector("#requires").textContent+=" with affection "+r[0].min_affection+"+",n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].min_beauty&&void 0!==r[0].min_beauty&&(n.querySelector("#requires").textContent+=" "+r[0].min_beauty,n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0].time_of_day&&""!==r[0].time_of_day&&(n.querySelector("#requires").textContent+=" during the "+r[0].time_of_day,n.querySelector("#requires").classList.remove("d-none")),null!==r[0]?.held_item&&""!==r[0]?.held_item?.name&&(n.querySelector("#requires").textContent+=" holding "+(r[0]?.held_item?.name).replace("-"," "),n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none")),null!==r[0]?.known_move_type&&(n.querySelector("#requires").textContent+=" knowing a move of type "+(r[0]?.known_move_type?.name).replace("-"," "),n.querySelector("#requires").classList.remove("d-none"),n.querySelector("#arrow").classList.remove("d-none"))),n.querySelector("#pokemonChainImg").setAttribute("src",`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${e.species.url.substring(42).replace("/","")}.png`),n.querySelector("#pokemonChainName").textContent=e.species.name,n.querySelector("#pokemonChainId").textContent="No."+e.species.url.substring(42).replace("/","").toString().padStart(3,0),t.appendChild(n),t};document.querySelector("#AZ").addEventListener("click",()=>{offset=0,page=1,document.querySelector("#page").textContent=1,cards.innerHTML="";const e=listAux;e.sort((e,t)=>e.name.localeCompare(t.name)),renderPokemons(e,0,23)}),document.querySelector("#ZA").addEventListener("click",()=>{offset=0,page=1,document.querySelector("#page").textContent=1,cards.innerHTML="";const e=listAux;e.sort((e,t)=>t.name.localeCompare(e.name)),renderPokemons(e,0,23)}),document.querySelector("#higher").addEventListener("click",()=>{offset=0,page=1,document.querySelector("#page").textContent=1,cards.innerHTML="";var e=listAux.sort(function(e,t){return e.id-t.id});renderPokemons(e,0,23)}),document.querySelector("#less").addEventListener("click",()=>{offset=0,page=1,document.querySelector("#page").textContent=1,cards.innerHTML="";var e=listAux.sort(function(e,t){return t.id-e.id});renderPokemons(e,0,23)}),btnUp.addEventListener("click",()=>{0<document.documentElement.scrollTop&&window.scrollTo(0,0)}),window.onscroll=()=>{var e=document.documentElement.scrollTop;500<e?btnUp.style.transform="scale(1)":e<500&&(btnUp.style.transform="scale(0)")};